{"ast":null,"code":"import React,{useEffect,useState}from'react';import{getDailySummaries}from'../api';import{Line}from'react-chartjs-2';import Chart from'chart.js/auto';import'./HistoricalTrends.css';// Import the CSS file\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const cities=['Delhi','Mumbai','Chennai','Bangalore','Kolkata','Hyderabad'];const HistoricalTrends=()=>{const[data,setData]=useState({});useEffect(()=>{const fetchData=async()=>{try{const dataPromises=cities.map(async city=>{const response=await getDailySummaries(city);return{city,data:response.data};});const results=await Promise.all(dataPromises);const dataObj=results.reduce((acc,_ref)=>{let{city,data}=_ref;acc[city]=data;return acc;},{});console.log(dataObj);setData(dataObj);}catch(error){console.error('Error fetching historical trends:',error);}};fetchData();},[]);const chartData={labels:[],datasets:cities.map(city=>({label:city,data:[],borderColor:'rgba(75, 192, 192, 1)',backgroundColor:'rgba(75, 192, 192, 0.2)'}))};Object.keys(data).forEach(city=>{data[city].forEach(summary=>{if(!chartData.labels.includes(summary.date)){chartData.labels.push(summary.date);}const cityIndex=cities.indexOf(city);const dateIndex=chartData.labels.indexOf(summary.date);chartData.datasets[cityIndex].data[dateIndex]=summary.avg_temp;});});return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"header\",children:\"Historical Trends\"}),/*#__PURE__*/_jsx(\"div\",{className:\"chart-container\",children:/*#__PURE__*/_jsx(Line,{data:chartData,options:{responsive:true,plugins:{legend:{position:'top'}}}})})]});};export default HistoricalTrends;","map":{"version":3,"names":["React","useEffect","useState","getDailySummaries","Line","Chart","jsx","_jsx","jsxs","_jsxs","cities","HistoricalTrends","data","setData","fetchData","dataPromises","map","city","response","results","Promise","all","dataObj","reduce","acc","_ref","console","log","error","chartData","labels","datasets","label","borderColor","backgroundColor","Object","keys","forEach","summary","includes","date","push","cityIndex","indexOf","dateIndex","avg_temp","className","children","options","responsive","plugins","legend","position"],"sources":["C:/_RAJPRATEEM/PROJECTS/Weather-App/client/src/components/HisotricalTrends.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { getDailySummaries } from '../api';\nimport { Line } from 'react-chartjs-2';\nimport Chart from 'chart.js/auto';\nimport './HistoricalTrends.css'; // Import the CSS file\n\nconst cities = ['Delhi', 'Mumbai', 'Chennai', 'Bangalore', 'Kolkata', 'Hyderabad'];\n\nconst HistoricalTrends = () => {\n  const [data, setData] = useState({});\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const dataPromises = cities.map(async (city) => {\n          const response = await getDailySummaries(city);\n          return { city, data: response.data };\n        });\n\n        const results = await Promise.all(dataPromises);\n        const dataObj = results.reduce((acc, { city, data }) => {\n          acc[city] = data;\n          return acc;\n        }, {});\n\n        console.log(dataObj)\n\n        setData(dataObj);\n      } catch (error) {\n        console.error('Error fetching historical trends:', error);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  const chartData = {\n    labels: [],\n    datasets: cities.map(city => ({\n      label: city,\n      data: [],\n      borderColor: 'rgba(75, 192, 192, 1)',\n      backgroundColor: 'rgba(75, 192, 192, 0.2)',\n    }))\n  };\n\n  Object.keys(data).forEach(city => {\n    data[city].forEach(summary => {\n      if (!chartData.labels.includes(summary.date)) {\n        chartData.labels.push(summary.date);\n      }\n      const cityIndex = cities.indexOf(city);\n      const dateIndex = chartData.labels.indexOf(summary.date);\n      chartData.datasets[cityIndex].data[dateIndex] = summary.avg_temp;\n    });\n  });\n\n  return (\n    <div className=\"container\">\n      <h2 className=\"header\">Historical Trends</h2>\n      <div className=\"chart-container\">\n        <Line data={chartData} options={{ responsive: true, plugins: { legend: { position: 'top' } } }} />\n      </div>\n    </div>\n  );\n};\n\nexport default HistoricalTrends;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}